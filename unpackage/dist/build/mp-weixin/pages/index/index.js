(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"3cf3":function(t,n,e){"use strict";var o=e("d223"),i=e.n(o);i.a},"471d":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("a34a")),i=e("2f62"),r=a(e("38f8"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,n,e,o,i,r,a){try{var s=t[r](a),u=s.value}catch(c){return void e(c)}s.done?n(u):Promise.resolve(u).then(o,i)}function u(t){return function(){var n=this,e=arguments;return new Promise(function(o,i){var r=t.apply(n,e);function a(t){s(r,o,i,a,u,"next",t)}function u(t){s(r,o,i,a,u,"throw",t)}a(void 0)})}}function c(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(n){d(t,n,e[n])})}return t}function d(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var l=function(){return e.e("components/uni-search-bar/uni-search-bar").then(e.bind(null,"c2a2"))},f=function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-icons/uni-icons")]).then(e.bind(null,"1d38"))},h={components:{uniSearchBar:l,uniIcons:f},data:function(){return{titleNViewBackground:"",swiperCurrent:0,swiperLength:0,carouselList:[],goodsList:[],isCanUse:!0,skuList:[],productList:[],homeFlashTime:"00",newProductList:[],productCategoryList:[]}},computed:c({},(0,i.mapState)(["hasLogin","userInfo"])),onLoad:function(){this.loadData(),this.login()},methods:{wxGetUserInfo:function(){var n=this;t.getUserInfo({provider:"weixin",success:function(t){console.log(t.userInfo),n.isCanUse=!1,n.$store.commit("login",t.userInfo)},fail:function(t){}})},login:function(){var n=this;t.showLoading({title:"登录中..."}),t.login({provider:"weixin",success:function(e){var o=e.code;n.isCanUse||n.wxGetUserInfo(),r.default.post("/sso/user/getOpenId",{code:o}).then(function(e){var o=e.data;console.log(n.$store,"this.$store.",o),t.request({url:"http://39.98.122.62:8085/sso/user/miniLogin",data:{city:"string",gender:0,icon:"string",nickname:"string",phone:"string",wxAppid:"wx35cb9f6acb94bd15",wxOpenid:o.data.openId},method:"POST",header:{"content-type":"application/json"},success:function(n){console.log(n),t.hideLoading()}})})}})},toPhone:function(){t.navigateTo({url:"/pages/public/login"})},close:function(){this.isCanUse=!1},loadData:function(){var t=u(o.default.mark(function t(){var n,e;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.json("carouselList");case 2:return n=t.sent,this.titleNViewBackground=n[0].background,this.swiperLength=n.length,this.carouselList=n,t.next=8,this.$api.json("goodsList");case 8:e=t.sent,this.goodsList=e||[],this.getHomeList();case 11:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),swiperChange:function(t){var n=t.detail.current;this.swiperCurrent=n,this.titleNViewBackground=this.carouselList[n].background},navToDetailPage:function(n){var e=n.id;t.navigateTo({url:"/pages/product/product?id=".concat(e)})},navToPosition:function(){t.navigateTo({url:"/pages/index/selectPosition"})},navToMessage:function(){t.navigateTo({url:"/pages/message/orderWarn"})},navToSearch:function(){t.navigateTo({url:"/pages/index/search"})},navToCate:function(){t.switchTab({url:"/pages/category/category"})},getHomeList:function(){var t=this;r.default.post("/home/list",{}).then(function(n){var e=n.data;200===e.code&&(t.carouselList=e.data.advertiseList||[],t.productCategoryList=e.data.productCategoryList||[],t.skuList=e.data.hotProductList||[],t.newProductList=e.data.newProductList||[],t.productList=e.data.homeFlashPromotion.productList||[],e.data.homeFlashPromotion.startTime&&(t.homeFlashTime=new Date(e.data.homeFlashPromotion.startTime).getHours()-8))})}}};n.default=h}).call(this,e("543d")["default"])},"4d0e":function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,o=(t._self._c,e("bc0a")),i=e("bc0a");t.$mp.data=Object.assign({},{$root:{m0:o,m1:i}})},i=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return i})},6552:function(t,n,e){"use strict";e.r(n);var o=e("471d"),i=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(n,t,function(){return o[t]})}(r);n["default"]=i.a},"73a0":function(t,n,e){"use strict";e.r(n);var o=e("4d0e"),i=e("6552");for(var r in i)"default"!==r&&function(t){e.d(n,t,function(){return i[t]})}(r);e("3cf3");var a=e("2877"),s=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);n["default"]=s.exports},d223:function(t,n,e){},d407:function(t,n,e){"use strict";(function(t){e("2458"),e("921b");o(e("66fd"));var n=o(e("73a0"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])}},[["d407","common/runtime","common/vendor"]]]);