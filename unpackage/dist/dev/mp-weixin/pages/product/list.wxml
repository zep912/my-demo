<view class="container"><view class="mp-search-box"><uni-search-bar vue-id="1" radius="{{10}}" placeholder="请输入商品名称" data-event-opts="{{[['^cancel',[['search']]]]}}" bind:cancel="__e" bind:__l="__l"></uni-search-bar></view><view class="content"><view class="navbar"><view data-event-opts="{{[['tap',[['tabClick',[0]]]]]}}" class="nav-item" bindtap="__e">综合排序<text class="iconfont icon-xia"></text></view><view data-event-opts="{{[['tap',[['tabClick',[1]]]]]}}" class="nav-item" bindtap="__e">分类<text class="iconfont icon-xia"></text></view><view data-event-opts="{{[['tap',[['tabClick',[2]]]]]}}" class="nav-item" bindtap="__e"><text>筛选</text><view class="p-box"><text class="iconfont icon-shaixuan"></text></view></view><text data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="cate-item iconfont icon-leimupinleifenleileibie" bindtap="__e"></text><block wx:if="{{filterIndex===0}}"><view class="collapse"><view data-event-opts="{{[['tap',[['tabItemClick',[null]]]]]}}" class="{{['view-list',(productRequest.orderByType==='')?'current':'']}}" bindtap="__e">综合排序</view><view data-event-opts="{{[['tap',[['tabItemClick',[1]]]]]}}" class="{{['view-list',(productRequest.orderByType===1)?'current':'']}}" bindtap="__e">价格从低到高</view><view data-event-opts="{{[['tap',[['tabItemClick',[2]]]]]}}" class="{{['view-list',(productRequest.orderByType===2)?'current':'']}}" bindtap="__e">价格从高到低</view><view data-event-opts="{{[['tap',[['tabItemClick',[3]]]]]}}" class="{{['view-list',(productRequest.orderByType===3)?'current':'']}}" bindtap="__e">销量从低到高</view><view data-event-opts="{{[['tap',[['tabItemClick',[4]]]]]}}" class="{{['view-list',(productRequest.orderByType===4)?'current':'']}}" bindtap="__e">销量从高到低</view></view></block><block wx:if="{{filterIndex===1}}"><view class="collapse"><block wx:for="{{listCategory}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['tabICateClick',['$0'],[[['listCategory','id',item.id,'id']]]]]]]}}" class="{{['view-list-item',(productRequest.productCategoryId===item.id)?'current':'']}}" bindtap="__e">{{item.name}}</view></block></view></block><block wx:if="{{filterIndex===2}}"><view class="collapse"><view class="title">库存状态</view><view data-event-opts="{{[['tap',[['stockTypeClick',[1]]]]]}}" class="{{['view-list-search',(productRequest.stockType===1)?'current':'']}}" bindtap="__e">仅看有货</view><view data-event-opts="{{[['tap',[['stockTypeClick',[2]]]]]}}" class="{{['view-list-search',(productRequest.stockType===2)?'current':'']}}" bindtap="__e">仅看无货</view><view class="title">品牌</view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="__i1__" wx:key="id"><view data-event-opts="{{[['tap',[['brandClick',['$0'],[[['listBrand','id',item.$orig.id,'id']]]]]]]}}" class="{{['view-list-search',(item.g0)?'current':'',(item.$orig.id==='')?'allClass':'']}}" bindtap="__e">{{item.$orig.name}}</view></block><view class="btn-box"><button class="btn" type="primary" size="mini" data-event-opts="{{[['tap',[['reset',['$event']]]]]}}" bindtap="__e">重置</button><button class="btn" type="primary" size="mini" data-event-opts="{{[['tap',[['confirm',['$event']]]]]}}" bindtap="__e">确定</button></view></view></block></view><block wx:if="{{goodsList&&goodsList.length}}"><view class="{{['goods-list',(isCross)?'cross':'']}}"><block wx:for="{{goodsList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['navToDetailPage',['$0'],[[['goodsList','',index]]]]]]]}}" class="goods-item" bindtap="__e"><view class="image-wrapper"><image src="{{item.pic}}" mode="aspectFill"></image></view><view class="text-box"><text class="title clamp">{{item.name}}</text><view class="store-title">{{item.brandName}}</view><view class="price-box"><view class="price">{{''+item.price+''}}<text>{{"已售 "+item.sale}}</text><text>{{"库存 "+item.stock}}</text></view><text class="iconfont icon-iconfontxinzeng"></text></view></view></view></block></view></block><uni-load-more class="loadmore" vue-id="2" status="{{loadingType}}" bind:__l="__l"></uni-load-more><block wx:if="{{!goodsList.length&&!isErr}}"><view class="goods-list"><view class="iconfont icon-sousuokongyemian empty"></view><view class="text">没有搜索到商品，您还可以</view><button class="btn" type="primary" data-event-opts="{{[['tap',[['gotoIndex',['$event']]]]]}}" bindtap="__e">去逛逛</button></view></block><block wx:if="{{isErr}}"><view class="goods-list"><view class="iconfont icon-icon-test empty"></view><view class="text">网络一遍凉快去了～</view><button class="btn" type="primary" data-event-opts="{{[['tap',[['loadData',['refresh']]]]]}}" bindtap="__e">刷新</button></view></block></view><uni-popup class="vue-ref" vue-id="3" type="center" maskClick="{{false}}" data-ref="popup" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content"><view class="header"><text data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="iconfont icon-zuo" bindtap="__e"></text><text class="text">品牌</text><text data-event-opts="{{[['tap',[['confirm',['$event']]]]]}}" class="btn" bindtap="__e">确定</text></view><view class="body"><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="index" wx:key="$orig"><block><view class="title">{{index}}</view><block wx:for="{{item.l1}}" wx:for-item="val" wx:for-index="__i2__" wx:key="id"><view data-event-opts="{{[['tap',[['brandClick',['$0'],[[['listBrandAll','',index],['','id',val.$orig.id,'id']]]]]]]}}" class="{{['title item',(val.g1)?'current':'']}}" bindtap="__e">{{val.$orig.name}}</view></block></block></block></view></view></uni-popup></view>